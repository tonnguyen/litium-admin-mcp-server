---
title: "Configure Litium Search"
description: "Connect Litium to the Elasticsearch container."
---
Connect Litium to the Elasticsearch container.

To do this task you first need to complete the [Installation task](https://start.litium.dev/tutorials/installation/Installation).

## Configure Elasticsearch

A container running Elasticsearch was started in the Docker task. To connect to it you just need to adjust connectionstring, prefix and synonym server in the _Elasticsearch_\-section in `\Src\Litium.Accelerator.Mvc\appsettings.json`:

```json
"Elasticsearch": {
    "ConnectionString": "http://localhost:9200",
    "Username": null,
    "Password": null,
    "Prefix": "LitiumEducation",
    "Synonym": {
        "Server": "http://host.docker.internal:9210",
        "ApiKey": null
    }
}
```

- `ConnectionString` points Litium to the Elasticsearch container that was started in the Docker task.
- `Prefix` lets you reuse the same Elasticsearch container for multiple local installations by giving each one a unique value.
- The `Synonym` section should target the synonym server container so Elasticsearch can connect to it; synonyms are managed directly in Litium Backoffice.

Additional information on setup can be found in the [documentation for Litium Search](/platform/guides/litiumsearch).

## Test

1.  When the site has restarted the **Elasticsearch** menu option is available in Litium backoffice, select it and rebuild all indices:  
    ![elastic-in-litium-admin.png](./media/elastic-in-litium-admin.png)
2.  Select _Synonyms_ in the left menu and add a synonym so that a search for the term _Litium_ also includes hits for the term _Hoodie_  
    ![elastic-synonyms-in-litium-admin.png](./media/elastic-synonyms-in-litium-admin.png)
3.  Open your public website and verify:
    1.  That products are listed on the site
    2.  That a search for _litium_ show hoodies in the search result.

## Setup Kibana

You can use [Kibana](https://www.elastic.co/products/kibana) to view the data stored in Elasticsearch. Kibana is a web tool that was started in a container in the [Docker task](/platform/guides/local-installation-guide-setup-docker).

1.  Check status by opening [http://localhost:5601/status](http://localhost:5601/status) in a browser, it should say **Kibana status is Green**
2.  Click **Discover** in the left menu
    1.  _Define index pattern_: write `litium*` as pattern to select all Litium indexes
    2.  Click _next_ and in the _Time filter_ drop-down select _I don't want to use the Time filter_ and then click the _"Create index pattern"_\-button
    3.  Click **Discover** in the left menu again to display index content
3.  Experiment with different ways to explore and visualize the data in Elasticsearch, read more in the [Kibana quick start](https://www.elastic.co/guide/en/kibana/current/get-started.html).

## Next step

[Configure payment and shipment apps](/platform/guides/local-installation-guide-configure-payment-and-shipment-apps)

## Troubleshooting

There are in general three places to look for any issue that you experience during setup and test:

1.  Litium event log: `\Src\Litium.Accelerator.Mvc\bin\Debug\litium.log`
2.  Elasticsearch log: `\Src\Litium.Accelerator.Mvc\bin\Debug\elasticsearch.log`
3.  Log in docker - see _Useful docker commands_ in the [Docker task](/platform/guides/local-installation-guide-setup-docker) for details on how to read

### No items are added to _index queue_ when I click _Rebuild index_

If you are running low on % available disk space Elastic will make the index write protected. Try to reconfigure using [Kibana](https://start.litium.dev/tutorials/installation/Kibana):

1.  Open **dev tools** in Kibana _(Left menu > Dev tools)_
    
2.  Run these commands to adjust disk configuration:
    
```http
PUT _cluster/settings
{
  "transient": {
    "cluster.routing.allocation.disk.watermark.low": "3gb",
    "cluster.routing.allocation.disk.watermark.high": "2gb",
    "cluster.routing.allocation.disk.watermark.flood_stage": "1gb",
    "cluster.info.update.interval": "1m"
  }
}

PUT /_all/_settings
{
  "index.blocks.read_only_allow_delete": null
}
```
